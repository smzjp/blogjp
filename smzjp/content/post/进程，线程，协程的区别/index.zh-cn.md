---
original: true
title: 进程，线程，协程的关系
description: 进程，线程，协程的区别
date: 2022-12-20
slug: 
image: 01.jpeg
tags:
categories:
---

进程，线程，协程的出现是有时间先后顺序的，主要都是为了不断提高cpu的使用率。

### 进程

1. 进程是一个应用程序在一个数据集上的一次动态执行过程，是操作系统进行资源分配和调度的一个独立单位，是应用程序的运行载体。
2. 有五种状态 创建态，就绪态，阻塞态，执行态，终止态。
3. 进程一般是由应用程序，数据集合，进程控制快三部分组成。
4. 进程是操作系统分配资源的最小单元。

### 线程

因为进程开销大，主要体现在占用内存开销大，切换时间开销大。所以出现了线程。

1. 线程是程序执行的最小单元，也是cpu调度和分派的基本单元。进程是作为管理线程来使用。
2. 一个进程有一个或者多个线程，各个线程之间共享程序的内存空间(也就是进程的内存空间)。
3. 线程也有五态。其生命周期是
   1. 创建：一个新的线程被创建，等待该线程被调用执行
   2. 就绪：时间片已用完，此线程被强制暂停，等待下一次属于它的时间片到来
   3. 运行：此线程正在执行，正在占用时间片
   4. 阻塞：也叫等待状态，等待某一事件(如IO或者另一个程序)执行完。
   5. 退出：一个线程完成任务或者其他终止条件发生，该线程终止进入退出状态，退出状态释放该线程所分配的资源。

### 协程

线程之间切换还是有cpu时间消耗，但是线程是cpu调度的基本单元。没法改变，所以只能尽量减少线程的切换次数。这就出现了协程。

1. 把多线程的程序改为多协程的程序(只有一个主线程)，这样就减少了消耗，当然也还是有多线编程，比如多核处理器机器，可以一个核对应一个线程。
2. 一个线程可以有多个协程。
3. 协程是由程序员自己写程序来控制的，协程调度中心是程序员自己写的(当然都是引用的第三库或者官方库)，非操作系统控制。
4. 协程多了一个协程调度中心，也有时间片的功能，会在不同协程之间来回切换，是一种用户态的上下文切换技术。
5. 具有欺骗cpu的作用，使用了协程的线程每次都能使用cpu最大时间片。因为就算是某一个协程在执行IO操作，协程调度中心会切换到另外的协程继续执行，这样这个线程在cpu看来就是一直在运行态，没有阻塞。
6. 协程的切换是非抢占式的，相对于线程的抢占式切换来说。线程是当前分配的时间片用完了，必须强制切换到其他的线程，由操作系统控制。

